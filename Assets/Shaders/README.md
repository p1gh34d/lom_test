# Star Power Shaders

Этот набор шейдеров добавляет поддержку Star Power эффекта для вашей игры Guitar Hero.

## Шейдеры

### 1. Custom/GuitarFade
- **Назначение**: Основной шейдер для гитары с прокруткой текстуры
- **Особенности**: 
  - Прокрутка текстуры по Y оси
  - Star Power эффект с hue-shift и синим тинтом
  - Поддержка маски и размеров обложки

### 2. Custom/NoteShader
- **Назначение**: Шейдер для нот и их элементов
- **Особенности**:
  - Поддержка vertex colors
  - Emission эффекты
  - Star Power эффект

### 3. Custom/NoteStickGlowFade
- **Назначение**: Шейдер для палочек нот с затуханием
- **Особенности**:
  - **ИСПРАВЛЕНО**: Аура больше не сдвигается по Z оси
  - Glow эффекты
  - Fade эффект (только для прозрачности)
  - Star Power эффект

### 4. Custom/UniversalStarPower
- **Назначение**: Универсальный шейдер для всех остальных элементов
- **Особенности**:
  - Star Power эффект
  - Поддержка emission
  - Подходит для подложек, боковых частей гитары и т.д.

## Star Power Эффект

### Как это работает:
1. **Hue Shift**: Красные цвета смещаются к синему (по умолчанию +120°)
2. **Blue Tint**: Применяется голубой оттенок с настраиваемой интенсивностью
3. **Smooth Transition**: Плавное включение/выключение эффекта

### Параметры в инспекторе:
- **Star Power**: Интенсивность эффекта (0-1)
- **Star Tint**: Цвет тинта (RGB + Alpha для интенсивности)
- **Star Hue Shift**: Сдвиг оттенка в градусах (-180 до +180)
- **Star Intensity**: Множитель интенсивности тинта (0-2)

## Установка и настройка

### 1. Добавьте StarPowerController в сцену:
```csharp
// В любом GameObject добавьте компонент StarPowerController
// Или создайте пустой GameObject и добавьте его туда
```

### 2. Настройте материалы:
- Замените существующие шейдеры на новые Custom/... шейдеры
- Или создайте новые материалы с этими шейдерами

### 3. Управление из кода:
```csharp
// Активировать Star Power
StarPowerController.Instance.ActivateStarPower();

// Деактивировать Star Power
StarPowerController.Instance.DeactivateStarPower();

// Переключить Star Power
StarPowerController.Instance.ToggleStarPower();

// Установить интенсивность (0-1)
StarPowerController.Instance.SetStarPower(0.5f);
```

## Решение проблем

### Аура палочек сдвигается по Z оси:
- **Проблема**: В старом шейдере NoteStickGlowFade аура двигалась при затухании
- **Решение**: В новом шейдере fade эффект применяется только к alpha каналу, не затрагивая позицию

### Star Power не работает:
1. Убедитесь, что StarPowerController добавлен в сцену
2. Проверьте, что материалы используют правильные шейдеры
3. Включите Debug Info в StarPowerController для отладки

### Производительность:
- Шейдеры оптимизированы для мобильных устройств
- Hue rotation вычисляется только при активном Star Power
- Используйте `useSmoothTransition = false` для мгновенного переключения

## Настройка цветов

### Рекомендуемые настройки для красного → синего:
- **Star Hue Shift**: 120° (красный → синий)
- **Star Tint**: (0.55, 0.75, 1.0, 0.35) - голубой с умеренной интенсивностью
- **Star Intensity**: 1.0

### Для других цветовых переходов:
- **Зеленый → синий**: Star Hue Shift = 60°
- **Желтый → синий**: Star Hue Shift = 180°
- **Фиолетовый → синий**: Star Hue Shift = -60°

## Поддержка

Если у вас есть вопросы или проблемы:
1. Проверьте Debug Info в StarPowerController
2. Убедитесь, что все шейдеры правильно скомпилированы
3. Проверьте консоль Unity на наличие ошибок компиляции шейдеров